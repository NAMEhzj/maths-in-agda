--library=maths

open import Base.Equivalence 
open import Algebra.Group.Group
open import Agda.Primitive
open import Base.Sets
open import Base.PropTruncation

module Algebra.Group.GroupHomomorphism {l m} (G : Set l) (H : Set m) (G' : Group G) (H' : Group H) where

import Algebra.Group.GroupProps1 G G' as GP
import Algebra.Group.GroupProps1 H H' as HP

_âˆ™_ = Group._âˆ˜_ G'
eâ‚ = Group.e G'
_â»Â¹â‚ = Group._â»Â¹ G'

infix 10 _â»Â¹â‚


_*_ = Group._âˆ˜_ H'
eâ‚‚ = Group.e H'
_â»Â¹â‚‚ = Group._â»Â¹ H'


infix 10 _â»Â¹â‚‚


GroupHom : (G â†’ H) â†’ Set (l âŠ” m)
GroupHom Ï† = (a b : G) â†’ Ï† (a âˆ™ b) â‰¡ Ï† a * Ï† b        

hom-neut-cong : (Ï† : G â†’ H) â†’ GroupHom Ï† â†’ Ï† eâ‚ â‰¡ eâ‚‚
hom-neut-cong Ï† homÏ† = HP.LNeut-unique (Ï† eâ‚) (Ï† eâ‚)
                       ((Ï† eâ‚) * (Ï† eâ‚) =âŸ¨ =sym (homÏ† eâ‚ eâ‚) âŸ©
                        Ï† (eâ‚ âˆ™ eâ‚)     =âŸ¨ Group.LNeut G' eâ‚ under Ï†  âŸ©
                        Ï† eâ‚ â–¡= )

hom-inv-cong : (Ï† : G â†’ H) â†’ GroupHom Ï† â†’ (a : G) â†’ Ï† (a â»Â¹â‚) â‰¡ (Ï† a) â»Â¹â‚‚
hom-inv-cong Ï† homÏ† a = HP.LInv-unique (Ï† (a â»Â¹â‚)) (Ï† a)
                        ((Ï† (a â»Â¹â‚)) * (Ï† a) =âŸ¨ =sym (homÏ† (a â»Â¹â‚) a) âŸ©
                         Ï† ((a â»Â¹â‚) âˆ™ a)     =âŸ¨ Group.LInv G' a under Ï† âŸ©
                         Ï† eâ‚                =âŸ¨ hom-neut-cong Ï† homÏ† âŸ©
                         eâ‚‚ â–¡= )

import Algebra.Group.Subgroup G G' as SG

open ğ’«


kernel : (Ï† : G â†’ H) â†’ ğ’« G
U (kernel Ï†)              = Î£ G (Î» a â†’ âˆ¥ Ï† a â‰¡ eâ‚‚ âˆ¥)
i (kernel Ï†)      (a , _) = a 
injective (kernel Ï†) (a , eqâ‚) (b , eqâ‚‚) a=b with eqâ‚
...                 | eqâ‚' rewrite a=b = Î£-â‰¡-intro (refl , isTrunc eqâ‚' eqâ‚‚)


kernel-subgroup : (Ï† : G â†’ H) â†’ (GroupHom Ï†) â†’ SG.Subgroup (kernel Ï†)
kernel-subgroup = {!!}
